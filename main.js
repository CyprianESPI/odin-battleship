(()=>{"use strict";var e={28:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(81),s=n.n(r),i=n(645),a=n.n(i),o=n(667),l=n.n(o),d=new URL(n(934),n.b),c=a()(s()),h=l()(d);c.push([e.id,`:root {\n    /* https://m1.material.io/style/color.html#color-color-palette */\n    /* Blue */\n    --clr-primary-50: #E3F2FD;\n    --clr-primary-100: rgb(187, 222, 251);\n    --clr-primary-200: #90CAF9;\n    --clr-primary-300: rgb(100, 181, 246);\n    --clr-primary-400: #42A5F5;\n    --clr-primary-500: #2196F3;\n    --clr-primary-600: #1E88E5;\n    --clr-primary-700: #1976D2;\n    --clr-primary-800: #1565C0;\n    --clr-primary-900: #0D47A1;\n\n    /* Red */\n    --clr-A100: #FF8A80;\n    --clr-A200: #FF5252;\n    --clr-A400: #FF1744;\n    --clr-A700: #D50000;\n\n    --br: 15px;\n}\n\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\nh1,\nh2,\nh3 {\n    text-shadow: 0 0 20px #000;\n}\n\n/*border: 2px solid red;*/\n\nbody {\n    /* Disable mobile refresh on scroll up */\n    overscroll-behavior: none;\n    display: grid;\n    /* svh is like vh but it also accounts for top navigator search bar*/\n    height: 100svh;\n    grid-template-rows: auto 1fr auto;\n    text-align: center;\n    background-image: url(${h});\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n\nheader {\n    display: flex;\n    align-items: center;\n    text-align: center;\n    justify-content: space-around;\n    padding: 10px 5% 10px 5%;\n    color: var(--clr-primary-100);\n\n    /* Override default glass behaviour */\n    border-radius: 0 !important;\n    border: none !important;\n}\n\nmain {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-auto-flow: column;\n}\n\n/* Responsive for mobile */\n@media only screen and (max-width: 1026px) {\n    main {\n        grid-template-columns: auto;\n        grid-template-rows: 1fr 1fr;\n        grid-auto-flow: row;\n    }\n\n    h1 {\n        font-size: large;\n    }\n\n    h2 {\n        font-size: small;\n    }\n\n    .move-btn {\n        font-size: 15px;\n        width: 15px;\n    }\n}\n\nbutton {\n    border: none;\n}\n\nbutton.enabled {\n    cursor: pointer;\n}\n\n.disabled {\n    filter: brightness(0.666);\n    pointer-events: none;\n}\n\n.rounded-btn {\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 3rem;\n    height: 3rem;\n    border-radius: 3rem;\n    background-color: var(--clr-primary-100);\n    color: var(--clr-primary-900);\n}\n\n.move-btn {\n    text-shadow: 0 0 10px #000;\n    border-radius: 50%;\n    box-shadow: none;\n    background: none;\n    margin-top: -5cqh;\n    margin-left: -5cqh;\n    width: 10cqh;\n    height: 10cqh;\n    font-size: 10cqh;\n    color: white;\n}\n\n@media (hover:hover) {\n    .move-btn.enabled:hover {\n        filter: brightness(1.50);\n        transform: scale(1.15);\n        text-shadow: 0 0 20px #000;\n    }\n\n    .rounded-btn.enabled:hover {\n        transform: scale(1.15);\n        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 20px;\n    }\n}\n\n/* card like container */\n.card {\n    border-radius: var(--br);\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n}\n\n.glass {\n    /* From https://css.glass */\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 16px;\n    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n    backdrop-filter: blur(5px);\n    -webkit-backdrop-filter: blur(5px);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.player-container {\n    display: grid;\n    grid-template-rows: auto 1fr;\n    margin: 10px;\n}\n\n#oponent {\n    color: var(--clr-A700);\n}\n\n#you {\n    color: var(--clr-primary-700);\n}\n\n.board-wrapper {\n    position: relative;\n}\n\n/* Overlay 2 grids on top of another */\n.board-stack {\n    /* Ensure the container is the biggest square within parent div*/\n    position: absolute;\n    inset: 0;\n    max-width: 100%;\n    max-height: 100%;\n    aspect-ratio: 1;\n    /* Use margin to center content */\n    margin: auto;\n\n    display: grid;\n}\n\n.board-stack.disabled {\n\n    /* Ensure overlays are disabled too */\n    * {\n        pointer-events: none;\n    }\n}\n\n/* set childs on same grid area to ensure they overlap */\n.board-stack>* {\n    grid-column: 1;\n    grid-row: 1;\n}\n\n.overlay {\n    container-type: size;\n    position: relative;\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 1fr;\n    pointer-events: none;\n}\n\n.overlay>* {\n    pointer-events: all;\n    position: absolute;\n    grid-column: 1;\n    grid-row: 1;\n}\n\n.ship-overlay {\n    background-color: gray;\n    opacity: 0.5;\n    border-radius: 100px;\n}\n\n.ship-overlay.damaged {\n    filter: brightness(0.666);\n}\n\n.ship-overlay.sunk {\n    filter: brightness(0);\n}\n\n.board {\n    display: grid;\n    grid-template-rows: repeat(10, 1fr);\n    grid-template-columns: repeat(10, 1fr);\n    gap: 5px;\n    padding: 5px;\n}\n\n.cell {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    border-radius: 25%;\n    background-color: var(--clr-primary-300);\n}\n\n.dot {\n    height: 50%;\n    width: 50%;\n    background-position: center;\n    /* Center the image */\n    background-repeat: no-repeat;\n    /* Do not repeat the image */\n    background-size: contain;\n}\n\n.clickable {\n    cursor: crosshair;\n    background-color: var(--clr-primary-100);\n}\n\n.clickable:hover {\n    filter: brightness(0.5);\n}\n\n/* Hide computer's ships overlay */\n.board-hidden>:nth-child(2) {\n    :not(.sunk) {\n        display: none;\n    }\n}\n\n\ndialog {\n    /* Center its content */\n    align-items: center;\n\n    /* Cannot give a display value otherwise the dialog is always visible */\n\n    padding: var(--br);\n    border-radius: var(--br);\n\n    background-color: var(--clr-primary-900);\n    color: var(--clr-primary-100);\n\n    /* Center the dialog in the middle of the page*/\n    top: 33%;\n    left: 50%;\n    -webkit-transform: translateX(-50%) translateY(-33%);\n    -moz-transform: translateX(-50%) translateY(-33%);\n    -ms-transform: translateX(-50%) translateY(-33%);\n    transform: translateX(-50%) translateY(-33%);\n\n    >.grid-container {\n        display: grid;\n        justify-items: center;\n        align-items: center;\n\n        >* {\n            display: grid;\n            justify-items: center;\n            align-items: center;\n            gap: var(--br);\n            margin: var(--br);\n        }\n    }\n}\n\n#dialog-game-over {\n    color: white;\n}\n\n#dialog-game-over.loss {\n    background: var(--clr-A700);\n}\n\n#dialog-game-over.win {\n    background: var(--clr-primary-900);\n}\n\ninput {\n    border: 2px solid var(--clr-primary-500);\n    padding: 2px;\n\n    &:focus {\n        /* remove default browser style on focus */\n        outline: none !important;\n        border-color: var(--clr-primary-500);\n        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n    }\n\n    &:invalid {\n        border-color: var(--clr-A700);\n    }\n}\n\n.hidden {\n    display: none;\n}\n\n.shake {\n    /* Start the shake animation and make the animation last for 0.5 seconds */\n    animation: shake 0.5s;\n\n    /* When the animation is finished, start again */\n    animation-iteration-count: infinite;\n}\n\n@keyframes shake {\n    0% {\n        transform: translate(1px, 1px) rotate(0deg);\n    }\n\n    10% {\n        transform: translate(-1px, -2px) rotate(-1deg);\n    }\n\n    20% {\n        transform: translate(-3px, 0px) rotate(1deg);\n    }\n\n    30% {\n        transform: translate(3px, 2px) rotate(0deg);\n    }\n\n    40% {\n        transform: translate(1px, -1px) rotate(1deg);\n    }\n\n    50% {\n        transform: translate(-1px, 2px) rotate(-1deg);\n    }\n\n    60% {\n        transform: translate(-3px, 1px) rotate(0deg);\n    }\n\n    70% {\n        transform: translate(3px, 1px) rotate(-1deg);\n    }\n\n    80% {\n        transform: translate(-1px, -1px) rotate(1deg);\n    }\n\n    90% {\n        transform: translate(1px, 2px) rotate(0deg);\n    }\n\n    100% {\n        transform: translate(1px, -2px) rotate(-1deg);\n    }\n}`,""]);const p=c},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],o=0;o<e.length;o++){var l=e[o],d=r.base?l[0]+r.base:l[0],c=i[d]||0,h="".concat(d," ").concat(c);i[d]=c+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=s(u,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:m,references:1})}a.push(h)}return a}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var i=r(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var o=n(i[a]);t[o].references--}for(var l=r(e,s),d=0;d<i.length;d++){var c=n(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},934:(e,t,n)=>{e.exports=n.p+"4b2e40633ad25c2c42e5.jpg"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&!e;)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{class e{static Direction={right:[0,1],left:[0,-1],up:[1,0],down:[-1,0]};static CellStatus={water:0,waterHit:1,ship:2,shipHit:3,waterEmpty:4};constructor(t){this.ships=[],this.size=t,this.grid=[],this.enabled=!1;for(let n=0;n<t;n++){const n=[];for(let r=0;r<t;r++)n.push(e.CellStatus.water);this.grid.push(n)}}isOutOfBounds(e,t){return e<0||e>=this.size||t<0||t>=this.size}getAdjcentCoords(e){const t=[];for(let n of e)t.push([n[0]+1,n[1]+1]),t.push([n[0]+1,n[1]+0]),t.push([n[0]+1,n[1]-1]),t.push([n[0]+0,n[1]+1]),t.push([n[0]+0,n[1]+0]),t.push([n[0]+0,n[1]-1]),t.push([n[0]-1,n[1]+1]),t.push([n[0]-1,n[1]+0]),t.push([n[0]-1,n[1]-1]);return t}isMoveAllowed(t,n){if(t.isDamaged())return!1;const r=[];for(let e of t.shipCoordinates){const t=e[0]+n[0],s=e[1]+n[1];if(t<0||t>=this.size||s<0||s>=this.size)return!1;r.push([t,s])}const s=[];for(let e of r)s.push([e[0]+1,e[1]+1]),s.push([e[0]+1,e[1]+0]),s.push([e[0]+1,e[1]-1]),s.push([e[0]+0,e[1]+1]),s.push([e[0]+0,e[1]+0]),s.push([e[0]+0,e[1]-1]),s.push([e[0]-1,e[1]+1]),s.push([e[0]-1,e[1]+0]),s.push([e[0]-1,e[1]-1]);for(let n of s)if(!(n[0]<0||n[0]>=this.size||n[1]<0||n[1]>=this.size)){if(this.grid[n[0]][n[1]]===e.CellStatus.ship||this.grid[n[0]][n[1]]===e.CellStatus.shipHit){if(t.shipCoordinates.find((e=>e[0]===n[0]&&e[1]===n[1])))continue;return!1}if(this.grid[n[0]][n[1]]===e.CellStatus.waterHit&&r.find((t=>this.grid[t[0]][t[1]]===e.CellStatus.waterHit)))return!1}return!0}moveShip(t,n){for(let r=0;r<t.shipCoordinates.length;r++)this.grid[t.shipCoordinates[r][0]][t.shipCoordinates[r][1]]=e.CellStatus.water,t.shipCoordinates[r][0]=t.shipCoordinates[r][0]+n[0],t.shipCoordinates[r][1]=t.shipCoordinates[r][1]+n[1];for(let n of t.shipCoordinates)this.grid[n[0]][n[1]]=e.CellStatus.ship}placeShip(t,n,r){const s=[];for(let i=0;i<t.length;i++){const t=n[1]+i*r[1],a=n[0]+i*r[0];if(this.isOutOfBounds(t,a))return!1;if(this.grid[t][a]==e.CellStatus.ship)return!1;if(t+1<this.size&&this.grid[t+1][a]==e.CellStatus.ship||t-1>=0&&this.grid[t-1][a]==e.CellStatus.ship||a+1<this.size&&this.grid[t][a+1]==e.CellStatus.ship||a-1>=0&&this.grid[t][a-1]==e.CellStatus.ship)return!1;if(t+1<this.size&&a+1<this.size&&this.grid[t+1][a+1]==e.CellStatus.ship||t+1<this.size&&a-1>=0&&this.grid[t+1][a-1]==e.CellStatus.ship||t-1>=0&&a+1<this.size&&this.grid[t-1][a+1]==e.CellStatus.ship||t-1>=0&&a+1<this.size&&this.grid[t-1][a-1]==e.CellStatus.ship)return!1;s.push([t,a])}for(let t of s)this.grid[t[0]][t[1]]=e.CellStatus.ship;return t.shipCoordinates=s,this.ships.push(t),!0}receiveAttack(t){let n=null,r=!1;const s=t[0],i=t[1];for(let t of this.ships){for(let a of t.shipCoordinates)if(s==a[0]&&i==a[1]){t.hit(),this.grid[s][i]=e.CellStatus.shipHit,r=!0,t.isSunk()&&(n=t);break}if(r)break}if(null!==n){const t=this.getAdjcentCoords(n.shipCoordinates);for(let n of t){const t=n[0],r=n[1];this.isOutOfBounds(t,r)||this.grid[t][r]===e.CellStatus.water&&(this.grid[t][r]=e.CellStatus.waterEmpty)}}return r||(this.grid[s][i]=e.CellStatus.waterHit),r}gameOver(){for(let e of this.ships)if(!e.isSunk())return!1;return!0}setEnabled(e){this.enabled=e}}const t=e,r=class{constructor(e,t){this.length=e,this.name=void 0===t?"undefined":t,this.hits=0}hit(){this.hits++}isSunk(){return this.hits>=this.length}isDamaged(){return this.hits>0}};class s{static boardSize=10;static peerConnectionConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};constructor(e,n){this.wins=n,this.name=e,this.board=new t(s.boardSize),this.ships=[new r(2,"corvette"),new r(3,"submarine"),new r(3,"destroyer"),new r(4,"cruiser"),new r(5,"aircraft")],this.plays=[],this.remainingPlays=[];for(let e=0;e<s.boardSize;e++)for(let t=0;t<s.boardSize;t++)this.remainingPlays.push([e,t]);for(var i=this.remainingPlays.length-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),o=this.remainingPlays[i];this.remainingPlays[i]=this.remainingPlays[a],this.remainingPlays[a]=o}}play(e,n){this.plays.push(n);const r=e.board.receiveAttack(n);for(let n=this.remainingPlays.length-1;n>=0;n--){const r=this.remainingPlays[n][0],s=this.remainingPlays[n][1];e.board.grid[r][s]!==t.CellStatus.waterHit&&e.board.grid[r][s]!==t.CellStatus.waterEmpty&&e.board.grid[r][s]!==t.CellStatus.shipHit||this.remainingPlays.splice(n,1)}return r&&e.board.gameOver()&&this.wins++,r}playRandom(e){const t=this.remainingPlays.pop(),n=this.play(e,t);if(n){let n,r=!1;for(let s=0;s<e.ships.length;s++){const i=e.ships[s];if(n=i.shipCoordinates.find((e=>e[0]===t[0]&&e[1]===t[1])),void 0!==n){n=i,r=i.shipCoordinates[0][0]===i.shipCoordinates[1][0];break}}if(void 0===n)return void console.error("hitShip not found... Check oponent",e);const s=[];for(let e=this.remainingPlays.length-1;e>=0;e--){const i=this.remainingPlays[e][0],a=this.remainingPlays[e][1],o=1===Math.abs(i-t[0])&&0===Math.abs(a-t[1]),l=0===Math.abs(i-t[0])&&1===Math.abs(a-t[1]);(n.hits<2&&(o||l)||o&&!r||l&&r)&&(this.remainingPlays.splice(e,1),s.push([i,a]))}s.forEach((e=>{this.remainingPlays.push(e)}))}return n}shuffleShips(){const e=[[1,0],[0,1]];for(let t of this.ships){let n=Math.floor(Math.random()*(s.boardSize-1)),r=Math.floor(Math.random()*(s.boardSize-1)),i=Math.random()>=.5?e[0]:e[1];for(;!this.board.placeShip(t,[n,r],i);)n=Math.floor(Math.random()*(s.boardSize-1)),r=Math.floor(Math.random()*(s.boardSize-1)),i=Math.random()>=.5?e[0]:e[1]}console.log(this.board.ships)}}const i=s;class a{static Type={solo:0,multiLocal:1,multiOnline:2};constructor(){this.type=a.Type.solo}newGame(e,t,n,r,s){this.type=e,this.p1=new i(t,n),e===a.Type.solo?this.p2=new i("CPU",s):this.p2=new i(r,s),this.players=[this.p1,this.p2],this.currentPlayer=this.p1;for(let e of this.players)e.shuffleShips()}switchPlayer(){for(let e of this.players)e.board.setEnabled(!e.board.enabled);this.currentPlayer=this.currentPlayer===this.p1?this.p2:this.p1}computerPlay(){this.p1Board.classList.add("disabled"),this.p2Board.classList.add("disabled"),setTimeout((()=>{this.p2.playRandom(this.p1)?(this.shakeBoard(this.p1Board),this.checkGameOver(),this.computerPlay()):(this.p1Board.classList.remove("disabled"),this.p2Board.classList.remove("disabled")),this.render()}),500)}getOponent(){return this.currentPlayer===this.p1?this.p2:this.p1}getOponentBoard(){return this.currentPlayer===this.p1?this.p2Board:this.p1Board}shakeBoard(e){navigator.vibrate(200),e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),200)}play(e){const t=this.getOponent();return this.currentPlayer.play(t,e)}checkGameOver(){const e=document.getElementById("dialog-game-over");if(this.p2.board.gameOver())document.getElementById("game-over-result").innerText="You win!",e.classList.add("win"),e.classList.remove("loss");else{if(!this.p1.board.gameOver())return;document.getElementById("game-over-result").innerText="You lose...",e.classList.remove("win"),e.classList.add("loss")}document.getElementById("game-over-name-cpu").innerText=this.p2.name,document.getElementById("game-over-name-you").innerText=this.p1.name,document.getElementById("game-over-score-cpu").innerText=this.p2.wins,document.getElementById("game-over-score-you").innerText=this.p1.wins,e.showModal()}render(){this.p1.board.render(this.p1Board,this),this.p2.board.render(this.p2Board,this)}}const o=a,l=class{static removeContent(e){if(null===e|void 0===e)console.error("Utils.removeContent, elem is",e);else for(;e.firstChild;)e.firstChild.remove()}static isEmpty(e){return 0===Object.keys(e).length}static removeIndexFromArray(e,t){t>-1&&e.splice(t,1)}static removeObjFromArray(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}},d=class extends t{constructor(e,t){super(t),this.container=e}createMoveButton(e,n,r,s,i){const a=document.createElement("button");a.innerText="chevron_right";let o=[0,0];return e===t.Direction.right?(a.style.transform="rotate(0deg)",o=[0,1]):e===t.Direction.left?(a.style.transform="rotate(180deg)",o=[0,-1]):e===t.Direction.up?(a.style.transform="rotate(270deg)",o=[-1,0]):e===t.Direction.down&&(o=[1,0],a.style.transform="rotate(90deg)"),a.style.left=(n[0][1]+n[1][1])/2*10+10*o[1]+5+"%",a.style.top=(n[0][0]+n[1][0])/2*10+10*o[0]+5+"%",this.isMoveAllowed(i,o)?(a.className="material-symbols-outlined move-btn enabled",a.addEventListener("click",(e=>{this.moveShip(i,o),this.render(r,s)}))):a.className="material-symbols-outlined move-btn hidden",a}render(e){const n=this.container;l.removeContent(n);const r=document.createElement("div");r.className="board";for(let n=0;n<this.size;n++)for(let s=0;s<this.size;s++){const i=document.createElement("div"),a=document.createElement("div");a.className="dot",this.grid[n][s]===t.CellStatus.water?(i.className="cell water",this.enabled&&(i.className+=" clickable",i.addEventListener("click",(t=>{console.log(`Firing at ${n}, ${s}`),e.play([n,s])})))):this.grid[n][s]===t.CellStatus.waterHit?(i.className="cell water miss",a.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIHN0cm9rZT0iIzBENDdBMSIgc3Ryb2tlLXdpZHRoPSIxMDAiIGZpbGw9IiMwRDQ3QTEiIGQ9Im0yNTYtMjAwLTU2LTU2IDIyNC0yMjQtMjI0LTIyNCA1Ni01NiAyMjQgMjI0IDIyNC0yMjQgNTYgNTYtMjI0IDIyNCAyMjQgMjI0LTU2IDU2LTIyNC0yMjQtMjI0IDIyNFoiLz48L3N2Zz4=')",i.appendChild(a)):this.grid[n][s]===t.CellStatus.ship?(i.className="cell ship",this.enabled&&(i.className+=" clickable",i.addEventListener("click",(t=>{console.log(`Firing at ${n}, ${s}`),e.play([n,s])})))):this.grid[n][s]===t.CellStatus.shipHit?(i.className="cell ship hit",a.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIHN0cm9rZT0iI0ZGMTc0NCIgc3Ryb2tlLXdpZHRoPSI1MCIgZmlsbD0iI0ZGMTc0NCIgZD0iTTQ4MC0yODBxODMgMCAxNDEuNS01OC41VDY4MC00ODBxMC04My01OC41LTE0MS41VDQ4MC02ODBxLTgzIDAtMTQxLjUgNTguNVQyODAtNDgwcTAgODMgNTguNSAxNDEuNVQ0ODAtMjgwWm0wIDIwMHEtODMgMC0xNTYtMzEuNVQxOTctMTk3cS01NC01NC04NS41LTEyN1Q4MC00ODBxMC04MyAzMS41LTE1NlQxOTctNzYzcTU0LTU0IDEyNy04NS41VDQ4MC04ODBxODMgMCAxNTYgMzEuNVQ3NjMtNzYzcTU0IDU0IDg1LjUgMTI3VDg4MC00ODBxMCA4My0zMS41IDE1NlQ3NjMtMTk3cS01NCA1NC0xMjcgODUuNVQ0ODAtODBabTAtODBxMTM0IDAgMjI3LTkzdDkzLTIyN3EwLTEzNC05My0yMjd0LTIyNy05M3EtMTM0IDAtMjI3IDkzdC05MyAyMjdxMCAxMzQgOTMgMjI3dDIyNyA5M1ptMC0zMjBaIi8+PC9zdmc+')",i.appendChild(a)):this.grid[n][s]===t.CellStatus.waterEmpty&&(i.className="cell water empty",a.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIHN0cm9rZT0iIzBENDdBMSIgc3Ryb2tlLXdpZHRoPSI1MCIgZmlsbD0iIzBENDdBMSIgZD0iTTQ4MC04MHEtODMgMC0xNTYtMzEuNVQxOTctMTk3cS01NC01NC04NS41LTEyN1Q4MC00ODBxMC04MyAzMS41LTE1NlQxOTctNzYzcTU0LTU0IDEyNy04NS41VDQ4MC04ODBxODMgMCAxNTYgMzEuNVQ3NjMtNzYzcTU0IDU0IDg1LjUgMTI3VDg4MC00ODBxMCA4My0zMS41IDE1NlQ3NjMtMTk3cS01NCA1NC0xMjcgODUuNVQ0ODAtODBabTAtODBxMTM0IDAgMjI3LTkzdDkzLTIyN3EwLTEzNC05My0yMjd0LTIyNy05M3EtMTM0IDAtMjI3IDkzdC05MyAyMjdxMCAxMzQgOTMgMjI3dDIyNyA5M1ptMC0zMjBaIi8+PC9zdmc+')",i.appendChild(a)),r.appendChild(i)}n.appendChild(r);const s=document.createElement("div");s.className="overlay";for(let r of this.ships){const i=[r.shipCoordinates[0],r.shipCoordinates[r.shipCoordinates.length-1]],a=document.createElement("div");a.className="ship-overlay",a.className+=r.isSunk()?" sunk":"",a.className+=r.isDamaged()?" damaged":"";const o=2;a.style.left=`${10*i[0][1]+o}%`,a.style.top=`${10*i[0][0]+o}%`,a.style.height=10*Math.abs(i[1][0]-i[0][0]+1)-2*o+"%",a.style.width=10*Math.abs(i[1][1]-i[0][1]+1)-2*o+"%",s.appendChild(a),s.appendChild(this.createMoveButton(t.Direction.left,i,n,e,r)),s.appendChild(this.createMoveButton(t.Direction.right,i,n,e,r)),s.appendChild(this.createMoveButton(t.Direction.up,i,n,e,r)),s.appendChild(this.createMoveButton(t.Direction.down,i,n,e,r))}n.appendChild(s)}},c=class extends o{constructor(e,t){super(),this.p1Board=e,this.p2Board=t}newGame(e,t,n,r,s){super.newGame(e,t,n,r,s),this.p1Board.gameBoard=this.p2.board,this.p2Board.gameBoard=this.p1.board,this.p1Board.gameBoard.setEnabled(!0),this.render()}switchPlayer(){super.switchPlayer(),this.render(),setTimeout((()=>{this.p1Board.classList.add("hidden"),this.p2Board.classList.add("hidden"),setTimeout((()=>{alert("It's a miss! Press ok to swap"),this.currentPlayer===this.p1?(this.p1Board.classList.remove("board-hidden"),this.p2Board.classList.add("board-hidden")):(this.p1Board.classList.add("board-hidden"),this.p2Board.classList.remove("board-hidden")),this.p1Board.classList.remove("hidden"),this.p2Board.classList.remove("hidden")}),500)}),100)}computerPlay(){this.p1Board.classList.add("disabled"),this.p2Board.classList.add("disabled"),setTimeout((()=>{this.p2.playRandom(this.p1)?(this.shakeBoard(this.p1Board),this.checkGameOver(),this.computerPlay()):(this.p1Board.classList.remove("disabled"),this.p2Board.classList.remove("disabled")),this.render()}),500)}shakeBoard(e){navigator.vibrate(200),e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),200)}play(e){const t=super.play(e);if(this.render(),t)return this.shakeBoard(super.getOponentBoard()),void this.checkGameOver();switch(this.type){case o.Type.multiLocal:this.switchPlayer();break;case o.Type.solo:this.computerPlay()}}checkGameOver(){const e=document.getElementById("dialog-game-over");if(this.p2.board.gameOver())document.getElementById("game-over-result").innerText="You win!",e.classList.add("win"),e.classList.remove("loss");else{if(!this.p1.board.gameOver())return;document.getElementById("game-over-result").innerText="You lose...",e.classList.remove("win"),e.classList.add("loss")}document.getElementById("game-over-name-cpu").innerText=this.p2.name,document.getElementById("game-over-name-you").innerText=this.p1.name,document.getElementById("game-over-score-cpu").innerText=this.p2.wins,document.getElementById("game-over-score-you").innerText=this.p1.wins,e.showModal()}render(){const e=new d(this.p1Board,10);Object.assign(e,this.p1.board),e.render(this);const t=new d(this.p2Board,10);Object.assign(t,this.p2.board),t.render(this)}};var h=n(379),p=n.n(h),u=n(795),m=n.n(u),g=n(569),y=n.n(g),f=n(565),b=n.n(f),v=n(216),M=n.n(v),x=n(589),C=n.n(x),w=n(28),I={};function T(e){fetch(`https://script.google.com/macros/s/AKfycbzzZp7TaHWN-agOOuNJxLEhEEOC6rFgl5LfbqU59i5DQnzcyO7LNC23D6GGvgIQn5zJ/exec?username=${e}`,{method:"GET",mode:"cors"}).then((e=>{if(!e.ok)throw Error(e.statusText);const t=e.json();return console.log(t),t})).then((e=>{}))}I.styleTagTransform=C(),I.setAttributes=b(),I.insert=y().bind(null,"head"),I.domAPI=m(),I.insertStyleElement=M(),p()(w.Z,I),w.Z&&w.Z.locals&&w.Z.locals,function(){console.log("Initializing...");const e=document.getElementById("board-human"),t=document.getElementById("board-computer"),n=new c(e,t);let r=o.Type.solo;const s=new URLSearchParams(document.location.search);console.log(s);const i=s.get("p1"),a=s.get("p2");console.log(i),console.log(a),null===i||""===i?document.getElementById("dialog-solo").showModal():T(i);const l=document.getElementById("add-p2-btn"),d=document.getElementById("remove-p2-btn");null===a||""===a?(l.addEventListener("click",(e=>{const t=document.getElementById("dialog-multi");document.getElementById("p1-multi").value=i,t.showModal()})),r=o.Type.solo):(l.classList.replace("enabled","disabled"),d.classList.replace("disabled","enabled"),d.addEventListener("click",(e=>{document.getElementById("p1-solo").value=i,document.getElementById("form-solo").submit()})),r=o.Type.multiLocal,T(a)),n.newGame(r,i,0,a,0),document.getElementById("oponent-fleet-header").innerText=n.p2.name,document.getElementById("your-fleet-header").innerText=n.p1.name??"You",[document.getElementById("restart-btn-header"),document.getElementById("restart-btn-modal")].forEach((e=>e.addEventListener("click",(()=>{n.newGame(r,i,n.p1.wins,a,n.p2.wins),document.getElementById("dialog-game-over").close()})))),console.log("Initialized!")}()})()})();