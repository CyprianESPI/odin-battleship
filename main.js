(()=>{"use strict";var e={28:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(81),i=t.n(r),s=t(645),o=t.n(s)()(i());o.push([e.id,":root {\n    /* https://m1.material.io/style/color.html#color-color-palette */\n    /* Blue */\n    --clr-primary-50: #E3F2FD;\n    --clr-primary-100: #BBDEFB;\n    --clr-primary-200: #90CAF9;\n    --clr-primary-300: #64B5F6;\n    --clr-primary-400: #42A5F5;\n    --clr-primary-500: #2196F3;\n    --clr-primary-600: #1E88E5;\n    --clr-primary-700: #1976D2;\n    --clr-primary-800: #1565C0;\n    --clr-primary-900: #0D47A1;\n\n    /* Red */\n    --clr-A100: #FF8A80;\n    --clr-A200: #FF5252;\n    --clr-A400: #FF1744;\n    --clr-A700: #D50000;\n\n    --br: 15px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n/*border: 2px solid red;*/\n\nbody {\n    display: grid;\n    height: 100vh;\n    grid-template-rows: auto 1fr;\n    text-align: center;\n}\n\nheader {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px 5% 10px 5%;\n    background-color: var(--clr-primary-300);\n}\n\nmain {\n    display: grid;\n    grid-auto-flow: column;\n}\n\n/* Responsive for mobile */\n@media only screen and (max-width: 1026px) {\n    main {\n        grid-auto-flow: row;\n    }\n\n    h1 {\n        font-size: medium;\n    }\n\n    h2 {\n        font-size: small;\n    }\n\n    .move-btn {\n        font-size: 15px;\n        width: 15px;\n    }\n}\n\nbutton {\n    border: none;\n    background-color: var(--clr-primary-900);\n    color: white;\n}\n\nbutton.enabled {\n    cursor: pointer;\n}\n\n.rounded-btn {\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 6rem;\n    height: 3rem;\n    border-radius: 3rem;\n}\n\n.move-btn {\n    text-shadow: 0 0 10px #000;\n    border-radius: 50%;\n    box-shadow: none;\n    background: none;\n    margin-top: -5cqh;\n    margin-left: -5cqh;\n    width: 10cqh;\n    height: 10cqh;\n    font-size: 10cqh;\n}\n\n@media (hover:hover) {\n    button.enabled:hover {\n        filter: brightness(1.50);\n        transform: scale(1.15);\n        text-shadow: 0 0 20px #000;\n    }\n}\n\n.hidden {\n    display: none;\n}\n\n/* card like container */\n.player-container {\n    display: grid;\n    grid-template-rows: auto 1fr;\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n    margin: 10px 5% auto 5%;\n    border-radius: var(--br);\n}\n\n.board-container {\n    margin: 10px;\n    display: grid;\n    grid-template-rows: auto 1fr;\n    grid-template-columns: auto 1fr;\n    aspect-ratio: 1;\n}\n\n.numbers,\n.letters {\n    display: flex;\n    justify-content: space-around;\n}\n\n.letters {\n    flex-flow: column;\n}\n\n/* Overlay 2 grids on top of another */\n.board-stack {\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 1fr;\n}\n\n.board-stack.disabled {\n    filter: brightness(0.666);\n    pointer-events: none;\n\n    /* Ensure overlays are disabled too */\n    * {\n        pointer-events: none;\n    }\n}\n\n/* set childs on same grid area to ensure they overlap */\n.board-stack>* {\n    grid-column: 1;\n    grid-row: 1;\n}\n\n.overlay {\n    container-type: size;\n    position: relative;\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 1fr;\n    pointer-events: none;\n}\n\n.overlay>* {\n    pointer-events: all;\n    position: absolute;\n    grid-column: 1;\n    grid-row: 1;\n}\n\n.ship-overlay {\n    background-color: gray;\n    opacity: 0.5;\n    border-radius: 100px;\n}\n\n.ship-overlay.damaged {\n    filter: brightness(0.666);\n}\n\n.ship-overlay.sunk {\n    filter: brightness(0);\n}\n\n.board {\n    display: grid;\n    grid-template-rows: repeat(10, 1fr);\n    grid-template-columns: repeat(10, 1fr);\n    gap: 5px;\n    padding: 5px;\n}\n\n.cell {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.dot {\n    border-radius: 50%;\n    width: 33%;\n    height: 33%;\n}\n\n.clickable {\n    cursor: crosshair;\n}\n\n.clickable:hover {\n    filter: brightness(0.50);\n}\n\n.water,\n.ship {\n    background-color: var(--clr-primary-300);\n}\n\n.empty>* {\n    background-color: transparent;\n    border: 5px solid var(--clr-primary-900);\n}\n\n.miss>* {\n    background-color: var(--clr-primary-900);\n}\n\n.hit>* {\n    background-color: var(--clr-A400);\n}\n\n/* Hide computer's ships */\n#board-computer>:first-child>* {\n    background-color: var(--clr-primary-300);\n}\n\n/* Hide computer's ships overlay */\n#board-computer>:nth-child(2) {\n    :not(.sunk) {\n        display: none;\n    }\n}\n\n#oponent>h2 {\n    background-color: var(--clr-A700);\n    color: white;\n    border-radius: var(--br);\n    padding: 5px;\n}\n\n#you>h2 {\n    background-color: var(--clr-primary-900);\n    color: white;\n    border-radius: var(--br);\n    padding: 5px;\n}\n\n\ndialog {\n    /* Center its content */\n    align-items: center;\n\n    border-radius: var(--br);\n\n    /* Center the dialog in the middle of the page*/\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translateX(-50%) translateY(-50%);\n    -moz-transform: translateX(-50%) translateY(-50%);\n    -ms-transform: translateX(-50%) translateY(-50%);\n    transform: translateX(-50%) translateY(-50%);\n\n    >* {\n        margin: var(--br);\n    }\n}",""]);const a=o},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),n.push(c))}},n}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],d=r.base?l[0]+r.base:l[0],c=s[d]||0,h="".concat(d," ").concat(c);s[d]=c+1;var p=t(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)n[p].references++,n[p].updater(u);else{var m=i(u,r);r.byIndex=a,n.splice(a,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function i(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=t(s[o]);n[a].references--}for(var l=r(e,i),d=0;d<s.length;d++){var c=t(s[d]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}s=l}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var s=n[r]={id:r,exports:{}};return e[r](s,s.exports,t),s.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0,(()=>{const e=class{static removeContent(e){if(null===e|void 0===e)console.error("Utils.removeContent, elem is",e);else for(;e.firstChild;)e.firstChild.remove()}static isEmpty(e){return 0===Object.keys(e).length}static removeIndexFromArray(e,n){n>-1&&e.splice(n,1)}static removeObjFromArray(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}};class n{static Direction={right:[0,1],left:[0,-1],up:[1,0],down:[-1,0]};static CellStatus={water:0,waterHit:1,ship:2,shipHit:3,waterEmpty:4};constructor(e){this.ships=[],this.size=e,this.grid=[],this.enabled=!1;for(let t=0;t<e;t++){const t=[];for(let r=0;r<e;r++)t.push(n.CellStatus.water);this.grid.push(t)}}isOutOfBounds(e,n){return e<0||e>=this.size||n<0||n>=this.size}getAdjcentCoords(e){const n=[];for(let t of e)n.push([t[0]+1,t[1]+1]),n.push([t[0]+1,t[1]+0]),n.push([t[0]+1,t[1]-1]),n.push([t[0]+0,t[1]+1]),n.push([t[0]+0,t[1]+0]),n.push([t[0]+0,t[1]-1]),n.push([t[0]-1,t[1]+1]),n.push([t[0]-1,t[1]+0]),n.push([t[0]-1,t[1]-1]);return n}isMoveAllowed(e,t){if(e.isDamaged())return!1;const r=[];for(let n of e.shipCoordinates){const e=n[0]+t[0],i=n[1]+t[1];if(e<0||e>=this.size||i<0||i>=this.size)return!1;r.push([e,i])}const i=[];for(let e of r)i.push([e[0]+1,e[1]+1]),i.push([e[0]+1,e[1]+0]),i.push([e[0]+1,e[1]-1]),i.push([e[0]+0,e[1]+1]),i.push([e[0]+0,e[1]+0]),i.push([e[0]+0,e[1]-1]),i.push([e[0]-1,e[1]+1]),i.push([e[0]-1,e[1]+0]),i.push([e[0]-1,e[1]-1]);for(let t of i)if(!(t[0]<0||t[0]>=this.size||t[1]<0||t[1]>=this.size)){if(this.grid[t[0]][t[1]]===n.CellStatus.ship||this.grid[t[0]][t[1]]===n.CellStatus.shipHit){if(e.shipCoordinates.find((e=>e[0]===t[0]&&e[1]===t[1])))continue;return!1}if(this.grid[t[0]][t[1]]===n.CellStatus.waterHit&&r.find((e=>this.grid[e[0]][e[1]]===n.CellStatus.waterHit)))return!1}return!0}moveShip(e,t){for(let r=0;r<e.shipCoordinates.length;r++)this.grid[e.shipCoordinates[r][0]][e.shipCoordinates[r][1]]=n.CellStatus.water,e.shipCoordinates[r][0]=e.shipCoordinates[r][0]+t[0],e.shipCoordinates[r][1]=e.shipCoordinates[r][1]+t[1];for(let t of e.shipCoordinates)this.grid[t[0]][t[1]]=n.CellStatus.ship}placeShip(e,t,r){const i=[];for(let s=0;s<e.length;s++){const e=t[1]+s*r[1],o=t[0]+s*r[0];if(this.isOutOfBounds(e,o))return!1;if(this.grid[e][o]==n.CellStatus.ship)return!1;if(e+1<this.size&&this.grid[e+1][o]==n.CellStatus.ship||e-1>=0&&this.grid[e-1][o]==n.CellStatus.ship||o+1<this.size&&this.grid[e][o+1]==n.CellStatus.ship||o-1>=0&&this.grid[e][o-1]==n.CellStatus.ship)return!1;if(e+1<this.size&&o+1<this.size&&this.grid[e+1][o+1]==n.CellStatus.ship||e+1<this.size&&o-1>=0&&this.grid[e+1][o-1]==n.CellStatus.ship||e-1>=0&&o+1<this.size&&this.grid[e-1][o+1]==n.CellStatus.ship||e-1>=0&&o+1<this.size&&this.grid[e-1][o-1]==n.CellStatus.ship)return!1;i.push([e,o])}for(let e of i)this.grid[e[0]][e[1]]=n.CellStatus.ship;return e.shipCoordinates=i,this.ships.push(e),!0}receiveAttack(e){let t=null,r=!1;const i=e[0],s=e[1];for(let e of this.ships){for(let o of e.shipCoordinates)if(i==o[0]&&s==o[1]){e.hit(),this.grid[i][s]=n.CellStatus.shipHit,r=!0,e.isSunk()&&(t=e);break}if(r)break}if(null!==t){const e=this.getAdjcentCoords(t.shipCoordinates);for(let t of e){const e=t[0],r=t[1];this.isOutOfBounds(e,r)||this.grid[e][r]===n.CellStatus.water&&(this.grid[e][r]=n.CellStatus.waterEmpty)}}return r||(this.grid[i][s]=n.CellStatus.waterHit),r}gameOver(){for(let e of this.ships)if(!e.isSunk())return!1;return!0}setEnabled(e){this.enabled=e}createMoveButton(e,t,r,i,s){const o=document.createElement("button");o.innerText="chevron_right";let a=[0,0];return e===n.Direction.right?(o.style.transform="rotate(0deg)",a=[0,1]):e===n.Direction.left?(o.style.transform="rotate(180deg)",a=[0,-1]):e===n.Direction.up?(o.style.transform="rotate(270deg)",a=[-1,0]):e===n.Direction.down&&(a=[1,0],o.style.transform="rotate(90deg)"),o.style.left=(t[0][1]+t[1][1])/2*10+10*a[1]+5+"%",o.style.top=(t[0][0]+t[1][0])/2*10+10*a[0]+5+"%",this.isMoveAllowed(s,a)?(o.className="material-symbols-outlined move-btn enabled",o.addEventListener("click",(e=>{this.moveShip(s,a),this.render(r,i)}))):o.className="material-symbols-outlined move-btn hidden",o}render(t,r){e.removeContent(t);const i=document.createElement("div");i.className="board";for(let e=0;e<this.size;e++)for(let t=0;t<this.size;t++){const s=document.createElement("div"),o=document.createElement("div");o.className="dot",this.grid[e][t]===n.CellStatus.water?(s.className="cell water",this.enabled&&(s.className+=" clickable",s.addEventListener("click",(n=>{console.log(`Firing at ${e}, ${t}`),r.play([e,t])})))):this.grid[e][t]===n.CellStatus.waterHit?(s.className="cell water miss",s.appendChild(o)):this.grid[e][t]===n.CellStatus.ship?(s.className="cell ship",this.enabled&&(s.className+=" clickable",s.addEventListener("click",(n=>{console.log(`Firing at ${e}, ${t}`),r.play([e,t])})))):this.grid[e][t]===n.CellStatus.shipHit?(s.className="cell ship hit",s.appendChild(o)):this.grid[e][t]===n.CellStatus.waterEmpty&&(s.className="cell water empty",s.appendChild(o)),i.appendChild(s)}t.appendChild(i);const s=document.createElement("div");s.className="overlay";for(let e of this.ships){const i=[e.shipCoordinates[0],e.shipCoordinates[e.shipCoordinates.length-1]],o=document.createElement("div");o.className="ship-overlay",o.className+=e.isSunk()?" sunk":"",o.className+=e.isDamaged()?" damaged":"";const a=2;o.style.left=`${10*i[0][1]+a}%`,o.style.top=`${10*i[0][0]+a}%`,o.style.height=10*Math.abs(i[1][0]-i[0][0]+1)-2*a+"%",o.style.width=10*Math.abs(i[1][1]-i[0][1]+1)-2*a+"%",s.appendChild(o),s.appendChild(this.createMoveButton(n.Direction.left,i,t,r,e)),s.appendChild(this.createMoveButton(n.Direction.right,i,t,r,e)),s.appendChild(this.createMoveButton(n.Direction.up,i,t,r,e)),s.appendChild(this.createMoveButton(n.Direction.down,i,t,r,e))}t.appendChild(s)}}const r=n,i=class{constructor(e,n){this.length=e,this.name=void 0===n?"undefined":n,this.hits=0}hit(){this.hits++}isSunk(){return this.hits>=this.length}isDamaged(){return this.hits>0}};class s{static boardSize=10;static peerConnectionConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};constructor(e){this.name=e,this.board=new r(s.boardSize),this.ships=[new i(2,"corvette"),new i(3,"submarine"),new i(3,"destroyer"),new i(4,"cruiser"),new i(5,"aircraft")],this.plays=[],this.remainingPlays=[];for(let e=0;e<s.boardSize;e++)for(let n=0;n<s.boardSize;n++)this.remainingPlays.push([e,n]);for(var n=this.remainingPlays.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),o=this.remainingPlays[n];this.remainingPlays[n]=this.remainingPlays[t],this.remainingPlays[t]=o}}play(e,n){this.plays.push(n);const t=e.board.receiveAttack(n);for(let n=this.remainingPlays.length-1;n>=0;n--){const t=this.remainingPlays[n][0],i=this.remainingPlays[n][1];e.board.grid[t][i]!==r.CellStatus.waterHit&&e.board.grid[t][i]!==r.CellStatus.waterEmpty&&e.board.grid[t][i]!==r.CellStatus.shipHit||this.remainingPlays.splice(n,1)}return t&&e.board.gameOver()&&document.getElementById("dialog-game-over").showModal(),t}playRandom(e){const n=this.remainingPlays.pop();return this.play(e,n)}shuffleShips(){const e=[[1,0],[0,1]];for(let n of this.ships){let t=Math.floor(Math.random()*(s.boardSize-1)),r=Math.floor(Math.random()*(s.boardSize-1)),i=Math.random()>=.5?e[0]:e[1];for(;!this.board.placeShip(n,[t,r],i);)t=Math.floor(Math.random()*(s.boardSize-1)),r=Math.floor(Math.random()*(s.boardSize-1)),i=Math.random()>=.5?e[0]:e[1]}console.log(this.board.ships)}}const o=s,a=class{constructor(e,n){this.humanBoard=e,this.computerBoard=n,this.newGame()}newGame(){this.human=new o("You"),this.computer=new o("CPU"),this.players=[this.human,this.computer];for(let e of this.players)e.shuffleShips();this.computer.board.setEnabled(!0),this.render()}newMutiplayerGameOnline(){const e=this.human,n=this.computer;e.peerConnection.onicecandidate=e=>{e.candidate&&n.peerConnection.addIceCandidate(e.candidate)},n.peerConnection.onicecandidate=n=>{n.candidate&&e.peerConnection.addIceCandidate(n.candidate)};const t=e.peerConnection.createDataChannel("dataChannel");t.onopen=()=>{console.log("Data channel opened!"),t.send("Hello from human!")},t.onmessage=e=>{console.log("Received message:",e.data)},n.peerConnection.ondatachannel=e=>{e.channel.onmessage=e=>{console.log(e),console.log("Received message:",e.data)},e.channel.onopen=()=>{console.log(e),console.log("Data channel opened!"),e.channel.send("Hello from computer!")}},e.peerConnection.createOffer().then((n=>e.peerConnection.setLocalDescription(n))).then((()=>n.peerConnection.setRemoteDescription(e.peerConnection.localDescription))).then((()=>n.peerConnection.createAnswer())).then((e=>n.peerConnection.setLocalDescription(e))).then((()=>e.peerConnection.setRemoteDescription(n.peerConnection.localDescription))).catch((e=>console.error("Error establishing connection:",e)))}computerPlay(){this.humanBoard.classList.add("disabled"),this.computerBoard.classList.add("disabled"),setTimeout((()=>{const e=this.computer.playRandom(this.human);console.log("setTimeout",e),e?this.computerPlay():(this.humanBoard.classList.remove("disabled"),this.computerBoard.classList.remove("disabled")),this.render()}),500)}play(e){const n=this.human.play(this.computer,e);this.render(),n||this.computerPlay()}render(){this.human.board.render(this.humanBoard,this),this.computer.board.render(this.computerBoard,this)}};var l=t(379),d=t.n(l),c=t(795),h=t.n(c),p=t(569),u=t.n(p),m=t(565),f=t.n(m),g=t(216),y=t.n(g),v=t(589),b=t.n(v),C=t(28),w={};w.styleTagTransform=b(),w.setAttributes=f(),w.insert=u().bind(null,"head"),w.domAPI=h(),w.insertStyleElement=y(),d()(C.Z,w),C.Z&&C.Z.locals&&C.Z.locals,function(){console.log("Initializing...");const e=new URLSearchParams(document.location.search);console.log(e);const n=document.getElementById("board-human"),t=document.getElementById("board-computer"),r=new a(n,t);[document.getElementById("restart-btn-header"),document.getElementById("restart-btn-modal")].forEach((e=>e.addEventListener("click",(()=>{r.newGame(),document.getElementById("dialog-game-over").close()})))),console.log("Initialized!")}()})()})();